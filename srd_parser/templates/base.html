<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}SRD Parser{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/htmx.org@2.0.3"></script>
  <link rel="icon" href="data:,"/>
  <style>
    :root { --site-header-h: 64px; }
    /* Accessible focus ring for inputs */
    input:focus, textarea:focus, select:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(79,70,229,.6);
      border-color: rgba(79,70,229,.8);
    }
    /* Lightweight utility classes aligned with the editor */
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      gap: .375rem; padding: .375rem .75rem;
      border-radius: .375rem; border: 1px solid #d4d4d8;
      font-size: .875rem; line-height: 1.25rem;
      background: white; color: #111827; cursor: pointer;
      transition: background-color .15s ease, box-shadow .15s ease, opacity .15s ease;
    }
    .btn:hover { background: #f5f5f5; }
    .btn:disabled, .btn[disabled] { opacity: .5; cursor: not-allowed; }
    .btn-primary { background: #4f46e5; color: white; border-color: #4f46e5; }
    .btn-primary:hover { background: #4338ca; }
    .btn-dark { background: #111827; color: #fff; border-color: #111827; }
    .btn-dark:hover { background: #0b1220; }
    .btn-ghost { background: white; }
    .tag { display:inline-block; font-size: 11px; padding:.125rem .5rem; border:1px solid #e5e7eb; border-radius:.375rem; }
    .field { width: 100%; border: 1px solid #d4d4d8; border-radius: .375rem; padding: .375rem .5rem; font-size: 13px; background: white; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size: 13px; }
    html { scroll-behavior: smooth; }
    /* Simple spinner */
    .spinner { width: 1rem; height: 1rem; border-radius: 9999px; border: 2px solid #d4d4d8; border-top-color: #4f46e5; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    /* Markdown typography parity with editor */
    [data-markdown] { color: #111827; font-size: 0.95rem; line-height: 1.6; }
    [data-markdown] h1 { font-size: 1.75rem; font-weight: 700; margin: 1.25rem 0 .5rem; }
    [data-markdown] h2 { font-size: 1.5rem; font-weight: 700; margin: 1rem 0 .5rem; }
    [data-markdown] h3 { font-size: 1.25rem; font-weight: 600; margin: .75rem 0 .5rem; }
    [data-markdown] h4 { font-size: 1.125rem; font-weight: 600; margin: .5rem 0 .25rem; }
    [data-markdown] p { margin: .5rem 0; }
    [data-markdown] ul, [data-markdown] ol { margin: .5rem 0 .5rem 1.25rem; }
    [data-markdown] li { margin: .25rem 0; }
    [data-markdown] blockquote { border-left: 3px solid #e5e7eb; padding-left: .75rem; color: #374151; margin: .75rem 0; }
    [data-markdown] code { background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: .25rem; padding: .1rem .3rem; font-size: .85em; }
    [data-markdown] pre { background: #0b1020; color: #e5e7eb; border-radius: .375rem; padding: .75rem; overflow: auto; }
    [data-markdown] pre code { background: transparent; border: 0; padding: 0; }
    [data-markdown] a { color: #4f46e5; text-decoration: underline; }
    [data-markdown] table { width: 100%; border-collapse: collapse; margin: .75rem 0; }
    [data-markdown] th, [data-markdown] td { border: 1px solid #e5e7eb; padding: .4rem .5rem; text-align: left; }
    [data-markdown] th { background: #f9fafb; font-weight: 600; }
    [data-markdown] h1,
    [data-markdown] h2,
    [data-markdown] h3,
    [data-markdown] h4,
    [data-markdown] h5,
    [data-markdown] h6 { scroll-margin-top: calc(var(--site-header-h) + 12px); }
    [data-markdown] > :first-child { margin-top: 0 !important; }
    .top-under-header { top: var(--site-header-h); }
  </style>
</head>
<body class="min-h-screen bg-gray-50 flex flex-col text-neutral-900">
  <!-- Top bar (aligned with editor) -->
  <header class="sticky top-0 z-40 border-b bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 flex items-center gap-3">
      <!-- Breadcrumb removed for parser UI -->
      <div class="ml-auto flex items-center gap-2 relative">
        <button id="menu-toggle" class="btn sm:hidden" aria-label="Apri menu" aria-controls="nav-links" aria-expanded="false">â˜°</button>
        <nav id="nav-links" class="hidden absolute right-0 top-full mt-2 flex flex-col gap-2 bg-white border shadow p-2 sm:static sm:flex sm:flex-row sm:items-center sm:gap-2 sm:border-0 sm:shadow-none sm:p-0" aria-label="Azioni">
          {% block header_actions %}{% endblock %}
        </nav>
      </div>
    </div>
  </header>

  <!-- Content -->
  <main class="flex-1">
    <div id="page-root" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      {% block content %}{% endblock %}
    </div>
  </main>

  {% block scripts %}{% endblock %}
  <script>
    // Update header height CSS var for anchored content
    document.addEventListener('DOMContentLoaded', function(){
      try {
        const hdr = document.querySelector('header');
        const setH = ()=>{ if(hdr){ document.documentElement.style.setProperty('--site-header-h', hdr.offsetHeight + 'px'); } };
        setH();
        window.addEventListener('resize', setH);
      } catch(e) {}
    });
    // Mobile menu toggle (parity with editor)
    (function(){
      const btn = document.getElementById('menu-toggle');
      const nav = document.getElementById('nav-links');
      if(!btn || !nav) return;
      btn.addEventListener('click', ()=>{
        const hidden = nav.classList.toggle('hidden');
        btn.setAttribute('aria-expanded', (!hidden).toString());
      });
      document.addEventListener('click', (e)=>{
        if(nav.classList.contains('hidden')) return;
        if(!nav.contains(e.target) && e.target !== btn){
          nav.classList.add('hidden');
          btn.setAttribute('aria-expanded','false');
        }
      });
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape'){
          nav.classList.add('hidden');
          btn.setAttribute('aria-expanded','false');
        }
      });
    })();
  </script>
</body>
</html>
