<!-- _rows.html - HTMX template for collection rows -->
<div class="divide-y">
  {% for doc in documents %}
    {% set doc_name = doc.get('name') or doc.get('nome') or doc.get('title') or doc.get('titolo') or doc.get('slug') %}
    {% set doc_slug = doc.get('slug') or doc.get('name') or doc.get('nome') %}
    
    <a href="/show/{{ collection }}/{{ doc_slug }}{% if qs %}?{{ qs }}{% endif %}" 
       class="block px-4 py-3 hover:bg-neutral-50 text-inherit no-underline">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <h3 class="font-medium text-blue-600">
            {{ doc_name }}
          </h3>
          
          {% if doc.get('level') or doc.get('livello') %}
            <span class="text-xs text-neutral-500">Livello {{ doc.get('level') or doc.get('livello') }}</span>
          {% endif %}
          
          {% if doc.get('school') or doc.get('scuola') %}
            <span class="text-xs text-neutral-500 ml-2">{{ doc.get('school') or doc.get('scuola') }}</span>
          {% endif %}
          
          {% if doc.get('rarity') or doc.get('rarita') %}
            <span class="text-xs text-neutral-500 ml-2">{{ doc.get('rarity') or doc.get('rarita') }}</span>
          {% endif %}
          
          {% if doc.get('category') or doc.get('categoria') %}
            <span class="text-xs text-neutral-500 ml-2">{{ doc.get('category') or doc.get('categoria') }}</span>
          {% endif %}
          
          {% if doc.get('challenge_rating') or doc.get('cr') %}
            <span class="text-xs text-neutral-500 ml-2">GS {{ doc.get('challenge_rating') or doc.get('cr') }}</span>
          {% endif %}
        </div>
        
        <div class="text-xs text-neutral-400">
          {% if doc.get('translated') %}
            <span class="text-green-600">✓ Tradotto</span>
          {% endif %}
        </div>
      </div>
    </a>
  {% endfor %}
  
  {% if not documents %}
    <div class="px-4 py-8 text-center text-neutral-500">
      <p>Nessun documento trovato.</p>
    </div>
  {% endif %}
</div>

<!-- Pagination -->
{% if total > page_size %}
<div class="px-4 py-3 border-t bg-neutral-50">
  <div class="flex items-center justify-between text-sm text-neutral-600">
    <div>
      Documenti {{ start_item }}-{{ end_item }} di {{ total }}
    </div>
    
    <div class="flex items-center space-x-2">
      {% if has_prev %}
        <button hx-get="/view/{{ collection }}?page={{ page - 1 }}{% if qs %}&{{ qs }}{% endif %}"
                hx-target="#rows"
                hx-include="closest form"
                class="px-3 py-1 bg-white border rounded hover:bg-neutral-50">
          ← Precedente
        </button>
      {% endif %}
      
      <span class="px-2">Pagina {{ page }} di {{ total_pages }}</span>
      
      {% if has_next %}
        <button hx-get="/view/{{ collection }}?page={{ page + 1 }}{% if qs %}&{{ qs }}{% endif %}"
                hx-target="#rows"
                hx-include="closest form"
                class="px-3 py-1 bg-white border rounded hover:bg-neutral-50">
          Successiva →
        </button>
      {% endif %}
    </div>
  </div>
</div>
{% endif %}