<!-- app/templates/index.html -->
{% extends "base.html" %}
{% block title %}5e SRD 2024{% endblock %}
{% block content %}
  <section class="hero">
    <h1>Il Fantastico Visualizzatore di SRD (5e 2024)</h1>
    <a href="https://duedraghialmicrofono.com" class="hero-link">
        sostenuto da Due Draghi al Microfono
    </a>

    <p>
    Questa applicazione aiuta a sfogliare, cercare e <strong>copiare rapidamente</strong> i contenuti della SRD della 5e 2024.
    Usa la ricerca testuale e i <strong>filtri specifici</strong> per ciascuna collezione; 
    </p>
    <div class="hero-stats">
        <span style="color: var(--gray-500);">Totale elementi indicizzati:</span>
        <span class="hero-stats-badge">{{ total or 0 }}</span>
    </div>
  </section>

  <div class="collection-grid">
      {% for c in collections %}
      <a href="/list/{{ c.name }}" class="collection-card">
          <div class="collection-card-content">
              <div class="collection-card-header">
                  <div>
                      <div class="collection-card-subtitle">Collezione</div>
                      <div class="collection-card-title">{{ c.label }}</div>
                      <div class="collection-card-key">chiave: <span class="mono">{{ c.name }}</span></div>
                  </div>
                  <div class="collection-badge" title="Numero di elementi">{{ c.count }}</div>
              </div>
              <div class="collection-card-footer">Apri â†’</div>
          </div>
      </a>
      {% endfor %}
  </div>

{% endblock %}
{% block scripts %}
<script>
  // Language switching removed - Italian only
  // Ensure header height after HTMX swaps
  document.addEventListener('htmx:afterSwap', function(){
    try { const hdr = document.querySelector('header'); if(hdr){ document.documentElement.style.setProperty('--site-header-h', hdr.offsetHeight + 'px'); } } catch(e){}
  });
  // Keep URL in sync when user uses back/forward
  window.addEventListener('popstate', function(){ /* no-op: server will read current lang/page on reload */ });
</script>
{% endblock %}
